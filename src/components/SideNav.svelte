<script>
  import { goto } from '$app/navigation';
  import { userPublickey } from '$lib/nostr';
  import { nip19 } from 'nostr-tools';
</script>

<div class="hidden md:block w-3/12 border border-slate-500 rounded-lg m-4 bg-gray-50 px-4 py-2">
  <div class="w-full">
    <svg
      class="w-full h-full"
      xmlns="http://www.w3.org/2000/svg"
      width="1002"
      height="1000"
      viewBox="0 0 1002 1000"
      version="1.1"
      ><path
        d="M 622 175.961 C 615.122 178.134, 592.342 187.775, 582.848 192.532 C 541.042 213.479, 510.321 241.753, 495.230 273.171 C 488.933 286.283, 488.229 288.179, 484.907 301 C 476.917 331.831, 479.059 371.738, 490.581 406.705 C 495.463 421.518, 496.441 427.731, 496.452 444 C 496.466 462.179, 494.793 470.488, 487.796 487 C 485.954 491.347, 478.183 504.980, 476.965 506 C 476.637 506.275, 474.900 508.657, 473.106 511.294 C 468.238 518.448, 453.166 533.821, 441.821 543.206 C 425.260 556.906, 400.509 572.698, 376.250 585.044 C 369.512 588.473, 364 591.822, 364 592.486 C 364 593.506, 371.585 609.862, 372.505 610.824 C 372.853 611.188, 396.997 598.920, 407 593.298 C 418.144 587.034, 448.835 566.391, 452 563.031 C 452.275 562.739, 455.425 560.069, 459 557.098 C 483.050 537.109, 501.495 512.634, 510.742 488.442 C 516.917 472.287, 518.340 464.220, 518.406 445 C 518.444 434.061, 517.985 425.438, 517.182 422 C 514.323 409.754, 513.641 407.202, 511.362 400.208 C 501.590 370.221, 499.262 333.204, 505.562 308 C 508.913 294.594, 516.953 277.028, 524.732 266.116 C 543.867 239.273, 580.171 214.360, 622.500 199.024 C 627.450 197.230, 631.890 195.404, 632.366 194.965 C 633.500 193.922, 627.060 174.974, 625.611 175.086 C 625 175.133, 623.375 175.527, 622 175.961"
        stroke="none"
        fill="#fc9400"
        fill-rule="evenodd"
      /><path
        d="M 470.476 178.877 C 450.864 186.762, 440.619 191.724, 426.161 200.339 C 400.979 215.345, 379.829 234.699, 365.278 256.052 C 360.213 263.485, 352.186 280.251, 348.927 290.207 C 343.368 307.182, 341.716 320.609, 342.307 344 C 342.934 368.793, 345.546 384.601, 352.472 405.500 C 358.325 423.163, 360.060 446.834, 356.651 462.516 C 346.903 507.359, 309.578 545.433, 239.500 582.016 C 231.800 586.036, 225.339 589.450, 225.143 589.603 C 224.571 590.049, 233.829 609, 234.619 609 C 235.894 609, 263.401 594.330, 274.058 587.965 C 312.921 564.757, 340.086 540.694, 358.686 513 C 365.617 502.681, 370.224 493.225, 374.310 480.931 C 379.168 466.316, 380.457 457.776, 380.337 441 C 380.230 425.968, 377.759 411.331, 372.984 397.454 C 369.992 388.758, 366.852 374.844, 365.010 362.119 C 363.403 351.019, 363.678 325.502, 365.519 314.891 C 374.601 262.545, 413.820 223.576, 484.117 197.051 C 489.563 194.996, 494.234 193.099, 494.498 192.835 C 495.016 192.317, 489.161 173.971, 488.097 172.776 C 487.742 172.378, 479.813 175.123, 470.476 178.877 M 759 179.860 C 723.143 194.257, 698.911 208.904, 677.643 229.036 C 646.964 258.076, 631.805 291.534, 630.306 333.514 C 629.498 356.143, 633.174 383.536, 639.585 402.651 C 650.325 434.677, 649.123 462.710, 635.866 489.363 C 618.785 523.705, 579.854 557.109, 525 584.489 C 518.675 587.646, 513.359 590.355, 513.188 590.510 C 512.920 590.751, 521.699 608.911, 522.528 609.829 C 523.060 610.419, 550.211 596.223, 562.188 589.093 C 621.620 553.711, 654.818 515.807, 666.214 470.320 C 668.071 462.909, 668.425 458.705, 668.433 444 C 668.442 424.725, 667.376 417.805, 661.496 399 C 654.273 375.899, 651.456 356.133, 652.292 334.412 C 653.453 304.223, 660.859 283.375, 678.548 260.500 C 693.575 241.067, 713.877 225.405, 742.500 211.166 C 754.333 205.279, 776.369 196, 778.515 196 C 779.122 196, 780.440 195.398, 781.446 194.663 C 783.196 193.384, 783.136 192.914, 780.054 183.663 C 777.690 176.567, 776.392 174.005, 775.168 174.019 C 774.250 174.029, 766.975 176.658, 759 179.860 M 887 555.089 C 859.963 556.683, 829.963 560.033, 802.034 564.578 C 744.352 573.964, 671.683 593.076, 621.241 612.126 L 610.981 616 398.047 616 L 185.113 616 183.557 618.223 C 181.114 621.710, 181.600 626.524, 184.750 630.030 C 186.304 631.761, 191.626 634.987, 196.989 637.451 C 202.208 639.849, 206.817 642.416, 207.231 643.156 C 207.645 643.895, 210.204 653.275, 212.919 664 C 231.134 735.961, 231.705 737.762, 237.190 740.598 C 239.484 741.785, 266.116 742, 410.516 742 C 583.573 742, 583.134 742.009, 586.600 738.543 C 589.666 735.476, 593.939 721.941, 611.710 659 L 615.521 645.500 630.711 637.840 C 681.533 612.211, 771.765 587.030, 848.752 576.991 C 871.463 574.029, 896.579 572.027, 911.203 572.013 C 925.171 571.999, 928.353 571.152, 930.575 566.855 C 932.706 562.733, 932.319 560.165, 929.077 556.923 L 926.154 554 913.327 554.147 C 906.272 554.227, 894.425 554.651, 887 555.089"
        stroke="none"
        fill="#9336fa"
        fill-rule="evenodd"
      /></svg
    >
    <button
      on:click={() => goto('/recent')}
      class="px-3 py-3 bg-white border border-gray-300 hover:bg-slate-50 rounded-lg mt-2 w-full"
    >
      <div class="text-left font-medium">
        <svg
          class="inline w-6 h-6 mr-1"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          ><path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"
          /></svg
        >
        <span>Recent</span>
      </div>
    </button>
    {#if $userPublickey !== ''}
      <button
        class="px-3 py-3 bg-white border border-gray-300 hover:bg-slate-50 rounded-lg mt-2 w-full"
        on:click={() => goto(`/bookmarks`)}
      >
        <div class="text-left font-medium">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="inline w-6 h-6 mr-1"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"
            />
          </svg>
          <span>Bookmarks</span>
        </div>
      </button>
      <button
        on:click={() => goto('/create')}
        class="px-3 py-3 bg-white border border-gray-300 hover:bg-slate-50 rounded-lg mt-2 w-full"
      >
        <div class="text-left font-medium">
          <svg
            class="inline w-6 h-6 mr-1"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            ><path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
            /></svg
          >
          <span>Create Recipe</span>
        </div>
      </button>
      <button
        on:click={() => goto(`/user/${nip19.npubEncode($userPublickey)}`)}
        class="px-3 py-3 bg-white border border-gray-300 hover:bg-slate-50 rounded-lg mt-2 w-full"
      >
        <div class="text-left font-medium">
          <svg
            class="inline w-6 h-6 mr-1"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            ><path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"
            /></svg
          >
          <span>My Profile</span>
        </div>
      </button>
    {/if}
    <button
      on:click={() => goto('/settings')}
      class="px-3 py-3 bg-white border border-gray-300 hover:bg-slate-50 rounded-lg mt-2 w-full"
    >
      <div class="text-left font-medium">
        <svg
          class="inline w-6 h-6 mr-1"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          ><path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"
          /><path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
          /></svg
        >
        <span>Settings</span>
      </div>
    </button>
    {#if $userPublickey == ''}
      <button
        on:click={() => goto('/login')}
        class="px-3 py-3 bg-blue-50 border border-blue-300 hover:bg-blue-100 rounded-lg mt-2 w-full"
      >
        <div class="text-center font-medium">
          <span>Login</span>
        </div>
      </button>
    {:else}
      <button
        on:click={() => goto('/login')}
        class="px-3 py-3 bg-blue-50 border border-blue-300 hover:bg-blue-100 rounded-lg mt-2 w-full"
      >
        <div class="text-center font-medium">
          <span>Logout</span>
        </div>
      </button>
    {/if}
  </div>
  <hr class="my-4" />
  <div class="text-center w-full text-sm">
    <p>
      <a
        class="hover:underline"
        target="_blank"
        rel="noopener noreferrer"
        href="https://nostr.cooking">NOSTR.COOKING</a
      >
    </p>
    <p>
      open source on <a
        class="hover:underline"
        target="_blank"
        rel="noopener noreferrer"
        href="https://github.com/github-tijlxyz/nostr.cooking">github</a
      >
    </p>
  </div>
</div>
